<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Contest Registration</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="container">
      <navbar id="nav">
        <div header>
          <header>Header</header>
        </div>
        <div id="aTag">
          <a>Signup</a>
          <a href="./profile.html">Profile</a>
        </div>
      </navbar>
      
      <h1>Signup</h1>
      <form>
          <input type="text" id="name" placeholder="Full Name" required>
          <input type="email" id="email" placeholder="Email" required>
          <input type="password" id="password" placeholder="Password" required>
          <input type="password" id="password" placeholder="Confirm Password" required>
          <div id="message"></div>
          <button type="submit"  onclick="storeData()">Signup</button>
          
      </form>
      
    </div>

    <script>
      
    function storeData(eve) {

      
      // const form = document.querySelector('form')
      // form.preventDefault(eve)

      const nameInput = document.getElementById('name');
      const emailInput = document.getElementById('email');
      const passwordInput = document.getElementById('password');

      const msg = document.getElementById('message')

      const name = nameInput.value;
      const email = emailInput.value;
      const password = passwordInput.value;

      
      
       

      if (name !== "" && email !== "" && password !== "") {

        var combo = "abcdef1234567890"
        var accessToken = "";
        for(let i = 0; i < 16; i++){
           accessToken += combo[Math.floor(Math.random()*combo.length)];
        }
        
        localStorage.setItem('name', name);
        localStorage.setItem('email', email);
        localStorage.setItem('password', password);
        localStorage.setItem('accessToken', accessToken);

        message.removeAttribute('id')
        message.setAttribute('class','msg')
        message.innerHTML = "Successfully Signed Up !"

        setTimeout(function() {
             window.location.href = '/profile.html'; 
        }, 2000);
        } else {
          message.innerHTML = "Error: All the fields are mandatory"
        }
      

    }
    


    </script>
  </body>
</html>
